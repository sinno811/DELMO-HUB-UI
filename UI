--[[ EasyMenuLib Prototype (Updated)

รวมระบบ ImageButton เปิด/ปิดเมนู + ลากปุ่มได้ + Animation

กดที่รูปภาพเพื่อเปิด/ปิดเมนู

รองรับการลากปุ่มด้วยเมาส์หรือทัช --]]


local Players = game:GetService("Players") local TweenService = game:GetService("TweenService") local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer local playerGui = player:WaitForChild("PlayerGui")

-- Main GUI container local screenGui = Instance.new("ScreenGui") screenGui.Name = "EasyMenuLibGUI" screenGui.ResetOnSpawn = false screenGui.Parent = playerGui

-- สร้าง ImageButton (ปุ่มรูป) มุมขวาบน local toggleBtn = Instance.new("ImageButton") toggleBtn.Name = "ToggleMenuButton" toggleBtn.Parent = screenGui toggleBtn.Size = UDim2.new(0, 60, 0, 60) toggleBtn.Position = UDim2.new(1, -70, 0, 12) toggleBtn.AnchorPoint = Vector2.new(0, 0) toggleBtn.BackgroundTransparency = 1 toggleBtn.Image = "rbxassetid://119073019742434" -- เปลี่ยนเป็น ID รูปของคุณได้เลย

toggleBtn.Rotation = 0

-- เมนูหลัก (Frame) local main = Instance.new("Frame") main.Name = "MainFrame" main.Parent = screenGui main.Size = UDim2.new(0, 520, 0, 420) main.Position = UDim2.new(0.5, -260, -1, 0) main.AnchorPoint = Vector2.new(0.5, 0) main.BackgroundColor3 = Color3.fromRGB(25, 25, 25) main.BackgroundTransparency = 0.05 main.Visible = true

-- ป้ายชื่อเมนู local title = Instance.new("TextLabel") title.Parent = main title.Size = UDim2.new(1, 0, 0, 50) title.BackgroundTransparency = 1 title.Text = "EasyMenuLib - Farm Settings" title.TextColor3 = Color3.fromRGB(255, 255, 255) title.Font = Enum.Font.SourceSansBold title.TextSize = 24

title.Position = UDim2.new(0, 0, 0, 10)

-- สถานะเปิด/ปิด local visible = false

-- ฟังก์ชัน toggle เมนู + แอนิเมชัน local function toggleMenu() visible = not visible

if visible then
    TweenService:Create(main, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        Position = UDim2.new(0.5, -260, 0.15, 0)
    }):Play()
    TweenService:Create(toggleBtn, TweenInfo.new(0.3), {Rotation = 90}):Play()
else
    TweenService:Create(main, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.In), {
        Position = UDim2.new(0.5, -260, -1, 0)
    }):Play()
    TweenService:Create(toggleBtn, TweenInfo.new(0.3), {Rotation = 0}):Play()
end

end

toggleBtn.MouseButton1Click:Connect(toggleMenu)

-- ระบบลากปุ่ม (Drag) local dragging = false local dragInput, dragStart, startPos

local function update(input) local delta = input.Position - dragStart toggleBtn.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y) end

toggleBtn.InputBegan:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then dragging = true dragStart = input.Position startPos = toggleBtn.Position

input.Changed:Connect(function()
        if input.UserInputState == Enum.UserInputState.End then
            dragging = false
        end
    end)
end

end)

toggleBtn.InputChanged:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then dragInput = input end end)

UserInputService.InputChanged:Connect(function(input) if dragging and input == dragInput then update(input) end end)

-- โหลดตำแหน่งเดิม (optional) local px = player:GetAttribute("MenuBtnPosX") local py = player:GetAttribute("MenuBtnPosY") if px and py then toggleBtn.Position = UDim2.new(1, px, 0, py) end

-- บันทึกตำแหน่งเมื่อปล่อย local function savePosition() local p = Players.LocalPlayer p:SetAttribute("MenuBtnPosX", toggleBtn.Position.X.Offset) p:SetAttribute("MenuBtnPosY", toggleBtn.Position.Y.Offset) end

toggleBtn.InputEnded:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then dragging = false savePosition() end end)

print("✅ EasyMenuLib Prototype Loaded - with ImageButton Toggle & Drag")
